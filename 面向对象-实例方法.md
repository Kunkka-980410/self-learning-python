## 实例方法的基本概念  
**定义和调用**
```python
class Player:
    def __init__(self, name, level=1):
        self.name = name
        self.level = level
        self.health = 100
    
    # 实例方法 - 第一个参数必须是 self
    def introduce(self):
        return f"我是{self.name}，等级{self.level}，生命值{self.health}"
    
    def level_up(self):
        """升级方法"""
        self.level += 1
        self.health += 20
        return f"{self.name}升级了！当前等级：{self.level}"
    
    def take_damage(self, damage):
        """受到伤害"""
        self.health -= damage
        if self.health <= 0:
            return f"{self.name}倒下了！"
        return f"{self.name}受到{damage}点伤害，剩余生命：{self.health}"

# 创建实例并调用方法
player1 = Player("战士小明", 5)
print(player1.introduce())  # 我是战士小明，等级5，生命值100
print(player1.level_up())   # 战士小明升级了！当前等级：6
print(player1.take_damage(30))  # 战士小明受到30点伤害，剩余生命：90
```
**实例方法的特点**
1. 必须包含 `self` 参数
```python
class Calculator:
    def __init__(self):
        self.result = 0
    
    # 正确：包含self参数
    def add(self, a, b):
        self.result = a + b
        return self.result
    
    # 错误：缺少self参数
    # def multiply(a, b):  # 这会报错！
    #     return a * b

calc = Calculator()
print(calc.add(5, 3))  # 8
```

2. 可以访问和修改实例属性
```python
class BankAccount:
    def __init__(self, owner, balance=0):
        self.owner = owner
        self.balance = balance
    
    def deposit(self, amount):
        """存款"""
        self.balance += amount
        return f"存款成功！当前余额：{self.balance}"
    
    def withdraw(self, amount):
        """取款"""
        if amount <= self.balance:
            self.balance -= amount
            return f"取款成功！当前余额：{self.balance}"
        else:
            return "余额不足！"
    
    def transfer(self, other_account, amount):
        """转账给另一个账户"""
        if self.balance >= amount:
            self.balance -= amount
            other_account.balance += amount
            return f"转账成功！给{other_account.owner}转账{amount}元"
        else:
            return "余额不足，转账失败！"

# 使用示例
account1 = BankAccount("张三", 1000)
account2 = BankAccount("李四", 500)

print(account1.deposit(300))  # 存款成功！当前余额：1300
print(account1.withdraw(200))  # 取款成功！当前余额：1100
print(account1.transfer(account2, 400))  # 转账成功！给李四转账400元

print(f"张三余额：{account1.balance}")  # 张三余额：700
print(f"李四余额：{account2.balance}")  # 李四余额：900
```

---
## 实际应用示例
**游戏角色系统**
```python
class GameCharacter:
    def __init__(self, name, character_class):
        self.name = name
        self.character_class = character_class
        self.level = 1
        self.exp = 0
        self.skills = []
    
    def gain_exp(self, exp_points):
        """获得经验"""
        self.exp += exp_points
        if self.exp >= self.level * 100:
            return self.level_up()
        return f"获得{exp_points}经验，当前经验：{self.exp}/{self.level * 100}"
    
    def level_up(self):
        """升级"""
        self.level += 1
        self.exp = 0
        new_skill = f"{self.character_class}技能_{self.level}"
        self.skills.append(new_skill)
        return f"恭喜{self.name}升级到{self.level}级！学会新技能：{new_skill}"
    
    def use_skill(self, skill_index):
        """使用技能"""
        if 0 <= skill_index < len(self.skills):
            return f"{self.name}使用了{self.skills[skill_index]}！"
        return "技能不存在！"
    
    def show_status(self):
        """显示状态"""
        return f"""
=== {self.name}的状态 ===
职业：{self.character_class}
等级：{self.level}
经验：{self.exp}/{self.level * 100}
技能：{', '.join(self.skills) if self.skills else '无'}
"""

# 使用示例
warrior = GameCharacter("狂暴战士", "战士")
print(warrior.gain_exp(80))   # 获得80经验，当前经验：80/100
print(warrior.gain_exp(40))   # 恭喜狂暴战士升级到2级！学会新技能：战士技能_2
print(warrior.use_skill(0))   # 狂暴战士使用了战士技能_2！
print(warrior.show_status())
```

电商购物车系统
```python
class ShoppingCart:
    def __init__(self, customer_name):
        self.customer_name = customer_name
        self.items = []
        self.total_price = 0
    
    def add_item(self, item_name, price, quantity=1):
        """添加商品"""
        self.items.append({
            'name': item_name,
            'price': price,
            'quantity': quantity
        })
        self._calculate_total()
        return f"已添加{quantity}件{item_name}到购物车"
    
    def remove_item(self, item_name):
        """移除商品"""
        for item in self.items:
            if item['name'] == item_name:
                self.items.remove(item)
                self._calculate_total()
                return f"已移除{item_name}"
        return "商品不在购物车中"
    
    def update_quantity(self, item_name, new_quantity):
        """更新商品数量"""
        for item in self.items:
            if item['name'] == item_name:
                item['quantity'] = new_quantity
                self._calculate_total()
                return f"已将{item_name}数量更新为{new_quantity}"
        return "商品不在购物车中"
    
    def _calculate_total(self):
        """计算总价（私有方法）"""
        self.total_price = sum(item['price'] * item['quantity'] for item in self.items)
    
    def checkout(self):
        """结账"""
        if not self.items:
            return "购物车为空！"
        
        receipt = f"""
=== 购物清单 ===
顾客：{self.customer_name}
"""
        for item in self.items:
            receipt += f"{item['name']} x{item['quantity']} - ￥{item['price'] * item['quantity']}\n"
        
        receipt += f"总计：￥{self.total_price}"
        return receipt

# 使用示例
cart = ShoppingCart("张三")
print(cart.add_item("iPhone", 5999, 1))  # 已添加1件iPhone到购物车
print(cart.add_item("AirPods", 1299, 2))  # 已添加2件AirPods到购物车
print(cart.update_quantity("AirPods", 1))  # 已将AirPods数量更新为1
print(cart.checkout())
```

---
总结
实例方法的核心特点：

✅ 第一个参数是 self：指向实例本身

✅ 可以访问实例属性：通过 self.属性名

✅ 定义对象的行为：描述对象能做什么

✅ 可以修改对象状态：改变实例属性的值

实例方法的用途：

封装对象的行为逻辑

操作和修改对象的状态

实现对象之间的交互

提供对外的接口
